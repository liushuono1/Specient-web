{% extends 'base.html' %}
{% load static %}

{% block title %}{{ common_data.navbar.brand }} - {{ page_data.hero.title }}{% endblock %}

{% block content %}
<!-- Optimization Hero -->
<section class="relative py-20 bg-spec-bg overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-t from-spec-earth/10 via-transparent to-transparent"></div>
    <!-- Simple Geometric Background -->
    <div class="absolute top-0 right-0 w-1/3 h-full opacity-10">
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <path fill="#C49A48" d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.7C91.4,-34.3,98.1,-19.6,95.8,-5.5C93.5,8.6,82.2,22.1,72.2,34.2C62.2,46.3,53.5,57,42.8,64.8C32.1,72.6,19.4,77.5,6.1,78.8C-7.2,80.1,-21.1,77.8,-33.4,71.6C-45.7,65.4,-56.4,55.3,-64.8,43.5C-73.2,31.7,-79.3,18.2,-80.4,4.2C-81.5,-9.8,-77.6,-24.3,-69.4,-36.5C-61.2,-48.7,-48.7,-58.6,-36.1,-66.5C-23.5,-74.4,-10.8,-80.3,3.3,-80.9C17.4,-81.5,30,-73,44.7,-76.4Z" transform="translate(100 100)" />
        </svg>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
        <div class="inline-block px-3 py-1 mb-4 text-xs font-semibold tracking-wider text-spec-earth uppercase bg-spec-earth/10 rounded-full">
            {{ common_data.ui.self_optimization_badge }}
        </div>
        <h1 class="text-4xl md:text-6xl font-bold text-spec-navy mb-6">
            {{ page_data.hero.title }}
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            {{ page_data.hero.description }}
        </p>
    </div>
</section>

<!-- Evolution Loop -->
<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-spec-navy">{{ page_data.evolutionLoop.title }}</h2>
            <p class="mt-4 text-gray-600">{{ page_data.evolutionLoop.description }}</p>
        </div>

        <div class="relative flex flex-col md:flex-row items-start justify-between">
            <!-- Connecting Line (Desktop) -->
            <div class="hidden md:block absolute top-8 left-0 w-full h-1 bg-gray-200 z-0"></div>
            
            {% for step in page_data.evolutionLoop.steps %}
            <div class="relative z-10 flex flex-col items-center w-full md:w-1/5 mb-8 md:mb-0 group">
                <!-- Circle/Icon -->
                <div class="w-16 h-16 rounded-full bg-spec-bg border-4 border-white shadow-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 ring-4 ring-transparent group-hover:ring-spec-earth/20">
                    <span class="text-2xl text-spec-earth font-bold">{{ step.id }}</span>
                </div>
                <!-- Content -->
                <div class="text-center px-4">
                    <h3 class="text-lg font-bold text-spec-navy mb-2">{{ step.title }}</h3>
                    <p class="text-sm text-gray-500">{{ step.desc }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Comparison -->
<section class="py-20 bg-spec-bg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-spec-navy mb-12 text-center">{{ page_data.comparison.title }}</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Before -->
            <div class="bg-white rounded-xl shadow-lg border-l-4 border-gray-400 overflow-hidden">
                <div class="p-6 border-b border-gray-100 bg-gray-50">
                    <h3 class="font-bold text-gray-600 text-lg flex items-center">
                        <span class="mr-2">⚡</span> {{ page_data.comparison.before.label }}
                    </h3>
                    <p class="text-sm text-gray-500 mt-2">{{ page_data.comparison.before.desc }}</p>
                </div>
                <div class="p-0 bg-[#282c34] overflow-x-auto">
                    <pre class="text-sm font-mono text-gray-300 p-6 leading-relaxed"><code>{{ page_data.comparison.before.code }}</code></pre>
                </div>
            </div>

            <!-- After -->
            <div class="bg-white rounded-xl shadow-lg border-l-4 border-spec-earth overflow-hidden transform md:-translate-y-4 md:shadow-xl">
                <div class="p-6 border-b border-gray-100 bg-spec-bg/30">
                    <h3 class="font-bold text-spec-earth text-lg flex items-center">
                        <span class="mr-2">✨</span> {{ page_data.comparison.after.label }}
                    </h3>
                    <p class="text-sm text-gray-500 mt-2">{{ page_data.comparison.after.desc }}</p>
                </div>
                <div class="p-0 bg-[#0A192F] overflow-x-auto">
                    <pre class="text-sm font-mono text-green-400 p-6 leading-relaxed"><code>{{ page_data.comparison.after.code }}</code></pre>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Simulation Logs -->
<section class="py-20 bg-[#0A192F] text-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold mb-8 text-center text-white">{{ page_data.simulation.title }}</h2>
        
        <div class="bg-black/50 rounded-lg p-6 font-mono text-sm shadow-2xl border border-gray-700 h-96 overflow-y-auto custom-scrollbar">
            {% for log in page_data.simulation.logs %}
            <div class="mb-2 font-mono flex">
                <span class="text-gray-500 mr-4">[{{ log.timestamp }}]</span>
                <span class="{% if log.level == 'INFO' %}text-blue-400{% elif log.level == 'SUCCESS' %}text-green-400{% elif log.level == 'WARN' %}text-yellow-400{% endif %} font-bold mr-4 w-16">{{ log.level }}</span>
                <span class="text-gray-300">{{ log.msg }}</span>
            </div>
            {% endfor %}
            <div class="mt-4 animate-pulse text-spec-earth">_</div>
        </div>
    </div>
</section>
{% endblock %}
